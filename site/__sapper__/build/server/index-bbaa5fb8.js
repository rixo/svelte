'use strict';

var index = require('./index-cfd1953e.js');
require('./index-da8c513b.js');
var app$1 = require('./app-9aa62f8c.js');
require('./index-7fd94c8f.js');
require('yootils');
require('./Repl-fe6a634c.js');
require('do-not-zip');

const isMac = typeof navigator !== 'undefined' && navigator.platform === 'MacIntel';

/* src/routes/repl/[id]/index.svelte generated by Svelte v3.12.0 */

const css = {
	code: ".repl-outer.svelte-126i8yp{position:relative;height:calc(100vh - var(--nav-h));--app-controls-h:5.6rem;--pane-controls-h:4.2rem;overflow:hidden;background-color:var(--back);padding:var(--app-controls-h) 0 0 0;box-sizing:border-box}.viewport.svelte-126i8yp{width:100%;height:100%}.mobile.svelte-126i8yp .viewport.svelte-126i8yp{width:200%;height:calc(100% - 42px);transition:transform 0.3s}.mobile.svelte-126i8yp .offset.svelte-126i8yp{transform:translate(-50%, 0)}.viewport.svelte-126i8yp .tab-content,.viewport.svelte-126i8yp .tab-content.visible{pointer-events:all;opacity:1}.viewport.svelte-126i8yp .tab-content{visibility:hidden}.viewport.svelte-126i8yp .tab-content.visible{visibility:visible}.zen-mode.svelte-126i8yp{position:fixed;width:100%;height:100%;top:0;z-index:111}.pane.svelte-126i8yp{width:100%;height:100% }.loading.svelte-126i8yp{text-align:center;color:var(--second);font-weight:400;margin:2em 0 0 0;opacity:0;animation:svelte-126i8yp-fade-in .4s;animation-delay:.2s;animation-fill-mode:both}@keyframes svelte-126i8yp-fade-in{0%{opacity:0 }100%{opacity:1 }}.input.svelte-126i8yp{padding:2.4em 0 0 0}.repl-outer.svelte-126i8yp{padding:0}.repl-outer.svelte-126i8yp .component-selector,.repl-outer.svelte-126i8yp .view-toggle{display:none !important}.repl-outer.svelte-126i8yp .tab-content{height:100% !important}.repl-outer.svelte-126i8yp .container > .container > .pane > section[slot]{padding-top:0 !important}",
	map: "{\"version\":3,\"file\":\"index.svelte\",\"sources\":[\"index.svelte\"],\"sourcesContent\":[\"<script context=\\\"module\\\">\\n\\texport function preload({ params, query }) {\\n\\t\\treturn {\\n\\t\\t\\tversion: query.version || '3',\\n\\t\\t\\tid: params.id\\n\\t\\t};\\n\\t}\\n</script>\\n\\n<script>\\n\\timport Repl from '@sveltejs/svelte-repl';\\n\\timport { onMount } from 'svelte';\\n\\timport { goto, stores } from '@sapper/app';\\n\\timport InputOutputToggle from '../../../components/Repl/InputOutputToggle.svelte';\\n\\timport AppControls from './_components/AppControls/index.svelte';\\n\\n\\texport let version;\\n\\texport let id;\\n\\n\\tconst { session } = stores();\\n\\n\\tlet repl;\\n\\tlet gist;\\n\\tlet name = 'Loading...';\\n\\tlet zen_mode = true;\\n\\tlet is_relaxed_gist = false;\\n\\tlet width = false ? window.innerWidth : 1000;\\n\\tlet checked = false;\\n\\n\\tfunction update_query_string(version) {\\n\\t\\tconst params = [];\\n\\n\\t\\tif (version !== 'latest') params.push(`version=${version}`);\\n\\n\\t\\tconst url = params.length > 0\\n\\t\\t\\t? `repl/${id}?${params.join('&')}`\\n\\t\\t\\t: `repl/${id}`;\\n\\n\\t\\thistory.replaceState({}, 'x', url);\\n\\t}\\n\\n\\t$: if (typeof history !== 'undefined') update_query_string(version);\\n\\n\\tfunction fetch_gist(id) {\\n\\t\\tif (gist && gist.uid === id) {\\n\\t\\t\\t// if the id changed because we just forked, don't refetch\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t// TODO handle `relaxed` logic\\n\\t\\tfetch(`repl/${id}.json`).then(r => {\\n\\t\\t\\tif (r.ok) {\\n\\t\\t\\t\\tr.json().then(data => {\\n\\t\\t\\t\\t\\tgist = data;\\n\\t\\t\\t\\t\\tname = data.name;\\n\\n\\t\\t\\t\\t\\tis_relaxed_gist = data.relaxed;\\n\\n\\t\\t\\t\\t\\tconst components = data.files.map(file => {\\n\\t\\t\\t\\t\\t\\tlet [name, type] = file.name.split('.');\\n\\t\\t\\t\\t\\t\\tif (type === 'html') type = 'svelte'; // TODO do this on the server\\n\\t\\t\\t\\t\\t\\treturn { name, type, source: file.source };\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\tcomponents.sort((a, b) => {\\n\\t\\t\\t\\t\\t\\tif (a.name === 'Game' && a.type === 'svelte') return -1;\\n\\t\\t\\t\\t\\t\\tif (b.name === 'Game' && b.type === 'svelte') return 1;\\n\\t\\t\\t\\t\\t\\tif (a.name === 'App' && a.type === 'svelte') return -1;\\n\\t\\t\\t\\t\\t\\tif (b.name === 'App' && b.type === 'svelte') return 1;\\n\\n\\t\\t\\t\\t\\t\\tif (a.type !== b.type) return a.type === 'svelte' ? -1 : 1;\\n\\n\\t\\t\\t\\t\\t\\treturn a.name < b.name ? -1 : 1;\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\trepl.set({ components });\\n\\t\\t\\t\\t});\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tconsole.warn('TODO: 404 Gist');\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}\\n\\n\\t$: if (false) fetch_gist(id);\\n\\n\\tonMount(() => {\\n\\t\\tif (version !== 'local') {\\n\\t\\t\\tfetch(`https://unpkg.com/svelte@${version || '3'}/package.json`)\\n\\t\\t\\t\\t.then(r => r.json())\\n\\t\\t\\t\\t.then(pkg => {\\n\\t\\t\\t\\t\\tversion = pkg.version;\\n\\t\\t\\t\\t});\\n\\t\\t}\\n\\t});\\n\\n\\tfunction handle_fork(event) {\\n\\t\\tconsole.log('> handle_fork', event);\\n\\t\\tgist = event.detail.gist;\\n\\t\\tgoto(`/repl/${gist.uid}?version=${version}`);\\n\\t}\\n\\n\\t$: svelteUrl = false && version === 'local' ?\\n\\t\\t`${location.origin}/repl/local` :\\n\\t\\t`https://unpkg.com/svelte@${version}`;\\n\\n\\tconst rollupUrl = `https://unpkg.com/rollup@1/dist/rollup.browser.js`;\\n\\n\\t// needed for context API example\\n\\tconst mapbox_setup = `window.MAPBOX_ACCESS_TOKEN = process.env.MAPBOX_ACCESS_TOKEN;`;\\n\\n\\t$: mobile = width < 540;\\n\\n\\t$: relaxed = is_relaxed_gist || ($session.user && gist && $session.user.uid === gist.owner);\\n</script>\\n\\n<style>\\n\\t.repl-outer {\\n\\t\\tposition: relative;\\n\\t\\theight: calc(100vh - var(--nav-h));\\n\\t\\t--app-controls-h: 5.6rem;\\n\\t\\t--pane-controls-h: 4.2rem;\\n\\t\\toverflow: hidden;\\n\\t\\tbackground-color: var(--back);\\n\\t\\tpadding: var(--app-controls-h) 0 0 0;\\n\\t\\t/* margin: 0 calc(var(--side-nav) * -1); */\\n\\t\\tbox-sizing: border-box;\\n\\t}\\n\\n\\t.viewport {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t}\\n\\n\\t.mobile .viewport {\\n\\t\\twidth: 200%;\\n\\t\\theight: calc(100% - 42px);\\n\\t\\ttransition: transform 0.3s;\\n\\t}\\n\\n\\t.mobile .offset {\\n\\t\\ttransform: translate(-50%, 0);\\n\\t}\\n\\n\\t/* temp fix for #2499 and #2550 while waiting for a fix for https://github.com/sveltejs/svelte-repl/issues/8 */\\n\\n\\t.viewport :global(.tab-content),\\n\\t.viewport :global(.tab-content.visible) {\\n\\t\\tpointer-events: all;\\n\\t\\topacity: 1;\\n\\t}\\n\\t.viewport :global(.tab-content) {\\n\\t\\tvisibility: hidden;\\n\\t}\\n\\t.viewport :global(.tab-content.visible) {\\n\\t\\tvisibility: visible;\\n\\t}\\n\\n\\t.zen-mode {\\n\\t\\tposition: fixed;\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\ttop: 0;\\n\\t\\tz-index: 111;\\n\\t}\\n\\n\\t.pane { width: 100%; height: 100% }\\n\\n\\t.loading {\\n\\t\\ttext-align: center;\\n\\t\\tcolor: var(--second);\\n\\t\\tfont-weight: 400;\\n\\t\\tmargin: 2em 0 0 0;\\n\\t\\topacity: 0;\\n\\t\\tanimation: fade-in .4s;\\n\\t\\tanimation-delay: .2s;\\n\\t\\tanimation-fill-mode: both;\\n\\t}\\n\\n\\t@keyframes fade-in {\\n\\t\\t0%   { opacity: 0 }\\n\\t\\t100% { opacity: 1 }\\n\\t}\\n\\n\\t.input {\\n\\t\\tpadding: 2.4em 0 0 0;\\n\\t}\\n\\n\\t.repl-outer {\\n\\t\\tpadding: 0;\\n\\t}\\n\\t.repl-outer :global(.component-selector),\\n\\t.repl-outer :global(.view-toggle) {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\t.repl-outer :global(.tab-content) {\\n\\t\\theight: 100% !important;\\n\\t}\\n\\t.repl-outer :global(.container > .container > .pane > section[slot]) {\\n\\t\\tpadding-top: 0 !important;\\n\\t}\\n</style>\\n\\n<svelte:head>\\n\\t<title>{name} • REPL • Svelte</title>\\n\\n\\t<meta name=\\\"twitter:title\\\" content=\\\"Svelte REPL\\\">\\n\\t<meta name=\\\"twitter:description\\\" content=\\\"Cybernetically enhanced web apps\\\">\\n\\t<meta name=\\\"Description\\\" content=\\\"Interactive Svelte playground\\\">\\n</svelte:head>\\n\\n<svelte:window bind:innerWidth={width}/>\\n\\n<div class=\\\"repl-outer {zen_mode ? 'zen-mode' : ''}\\\" class:mobile>\\n\\t<!-- <AppControls\\n\\t\\t{gist}\\n\\t\\t{repl}\\n\\t\\tbind:name\\n\\t\\tbind:zen_mode\\n\\t\\ton:forked={handle_fork}\\n\\t/> -->\\n\\n\\t{#if false}\\n\\t\\t<div class=\\\"viewport\\\" class:offset={checked}>\\n\\t\\t\\t<Repl\\n\\t\\t\\t\\tbind:this={repl}\\n\\t\\t\\t\\tworkersUrl=\\\"workers\\\"\\n\\t\\t\\t\\t{svelteUrl}\\n\\t\\t\\t\\t{rollupUrl}\\n\\t\\t\\t\\t{relaxed}\\n\\t\\t\\t\\tfixed={mobile}\\n\\t\\t\\t\\tinjectedJS={mapbox_setup}\\n\\t\\t\\t/>\\n\\t\\t</div>\\n\\n\\t\\t{#if mobile}\\n\\t\\t\\t<InputOutputToggle bind:checked/>\\n\\t\\t{/if}\\n\\t{/if}\\n</div>\\n\"],\"names\":[],\"mappings\":\"AAoHC,WAAW,eAAC,CAAC,AACZ,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAClC,gBAAgB,CAAE,MAAM,CACxB,iBAAiB,CAAE,MAAM,CACzB,QAAQ,CAAE,MAAM,CAChB,gBAAgB,CAAE,IAAI,MAAM,CAAC,CAC7B,OAAO,CAAE,IAAI,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAEpC,UAAU,CAAE,UAAU,AACvB,CAAC,AAED,SAAS,eAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AAED,sBAAO,CAAC,SAAS,eAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CACzB,UAAU,CAAE,SAAS,CAAC,IAAI,AAC3B,CAAC,AAED,sBAAO,CAAC,OAAO,eAAC,CAAC,AAChB,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,AAC9B,CAAC,AAID,wBAAS,CAAC,AAAQ,YAAY,AAAC,CAC/B,wBAAS,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AACxC,cAAc,CAAE,GAAG,CACnB,OAAO,CAAE,CAAC,AACX,CAAC,AACD,wBAAS,CAAC,AAAQ,YAAY,AAAE,CAAC,AAChC,UAAU,CAAE,MAAM,AACnB,CAAC,AACD,wBAAS,CAAC,AAAQ,oBAAoB,AAAE,CAAC,AACxC,UAAU,CAAE,OAAO,AACpB,CAAC,AAED,SAAS,eAAC,CAAC,AACV,QAAQ,CAAE,KAAK,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,GAAG,CAAE,CAAC,CACN,OAAO,CAAE,GAAG,AACb,CAAC,AAED,KAAK,eAAC,CAAC,AAAC,KAAK,CAAE,IAAI,CAAE,MAAM,CAAE,IAAI,CAAC,CAAC,AAEnC,QAAQ,eAAC,CAAC,AACT,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,IAAI,QAAQ,CAAC,CACpB,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACjB,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,sBAAO,CAAC,GAAG,CACtB,eAAe,CAAE,GAAG,CACpB,mBAAmB,CAAE,IAAI,AAC1B,CAAC,AAED,WAAW,sBAAQ,CAAC,AACnB,EAAE,AAAG,CAAC,AAAC,OAAO,CAAE,CAAC,CAAC,CAAC,AACnB,IAAI,AAAC,CAAC,AAAC,OAAO,CAAE,CAAC,CAAC,CAAC,AACpB,CAAC,AAED,MAAM,eAAC,CAAC,AACP,OAAO,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AACrB,CAAC,AAED,WAAW,eAAC,CAAC,AACZ,OAAO,CAAE,CAAC,AACX,CAAC,AACD,0BAAW,CAAC,AAAQ,mBAAmB,AAAC,CACxC,0BAAW,CAAC,AAAQ,YAAY,AAAE,CAAC,AAClC,OAAO,CAAE,IAAI,CAAC,UAAU,AACzB,CAAC,AACD,0BAAW,CAAC,AAAQ,YAAY,AAAE,CAAC,AAClC,MAAM,CAAE,IAAI,CAAC,UAAU,AACxB,CAAC,AACD,0BAAW,CAAC,AAAQ,+CAA+C,AAAE,CAAC,AACrE,WAAW,CAAE,CAAC,CAAC,UAAU,AAC1B,CAAC\"}"
};

function preload({ params, query }) {
	return {
		version: query.version || '3',
		id: params.id
	};
}

const Index = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $session;

	

	let { version, id } = $$props;

	const { session } = app$1.stores$1(); $session = index.get_store_value(session);
	let gist;
	let name = 'Loading...';
	let is_relaxed_gist = false;

	function update_query_string(version) {
		const params = [];

		if (version !== 'latest') params.push(`version=${version}`);

		const url = params.length > 0
			? `repl/${id}?${params.join('&')}`
			: `repl/${id}`;

		history.replaceState({}, 'x', url);
	}

	index.onMount(() => {
		if (version !== 'local') {
			fetch(`https://unpkg.com/svelte@${version || '3'}/package.json`)
				.then(r => r.json())
				.then(pkg => {
					version = pkg.version;
				});
		}
	});

	if ($$props.version === void 0 && $$bindings.version && version !== void 0) $$bindings.version(version);
	if ($$props.id === void 0 && $$bindings.id && id !== void 0) $$bindings.id(id);

	$$result.css.add(css);

	let $$settled;
	let $$rendered;

	do {
		$$settled = true;

		$session = index.get_store_value(session);

		if (typeof history !== 'undefined') update_query_string(version);
		let relaxed = is_relaxed_gist || ($session.user && gist && $session.user.uid === gist.owner);

		$$rendered = `${($$result.head += `<title>${index.escape(name)} • REPL • Svelte</title><meta name="twitter:title" content="Svelte REPL"><meta name="twitter:description" content="Cybernetically enhanced web apps"><meta name="Description" content="Interactive Svelte playground">`, "")}



		<div class="${[`repl-outer ${index.escape( 'zen-mode' )} svelte-126i8yp`,  ""].join(' ').trim() }">


			${  `` }
		</div>`;
	} while (!$$settled);

	return $$rendered;
});

exports.default = Index;
exports.preload = preload;
