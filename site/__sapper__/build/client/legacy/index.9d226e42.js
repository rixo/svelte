import"./typeof.ab799a4a.js";import"./_commonjsHelpers.7baa5521.js";import{_ as a,a as t}from"./asyncToGenerator.9962de7f.js";import{_ as s,a as e,b as r,c as n,i as o,s as u,d as f,S as c,o as i,e as p,q as l,f as h,g as v,h as d,j as m,l as g,n as b,L as E,F as x,G as y,R as j,ac as A,m as I,H as k,p as D,Q as H}from"./index.db006978.js";function N(a,t,s){var e=Object.create(a);return e.app=t[s],e}function P(a){var t,s,e,r,n,o;return{c:function(){t=p("p"),s=x("Please "),e=p("a"),r=x("log in"),n=x(" to see your saved apps."),this.h()},l:function(a){t=h(a,"P",{},!1);var o=v(t);s=y(o,"Please "),e=h(o,"A",{href:!0},!1);var u=v(e);r=y(u,"log in"),u.forEach(d),n=y(o," to see your saved apps."),o.forEach(d),this.h()},h:function(){m(e,"href","auth/login"),o=j(e,"click",A(a.login))},m:function(a,o){g(a,t,o),I(t,s),I(t,e),I(e,r),I(t,n)},p:b,d:function(a){a&&d(t),o()}}}function _(a){for(var t,s,e,r,n,o,u,f,c,b,E,P,_,q,G,L,R,V,Y,F,T=a.user.name||a.user.username+"",U=a.apps,C=[],M=0;M<U.length;M+=1)C[M]=w(N(a,U,M));var O=null!==a.offset&&S(a);return{c:function(){t=p("header"),s=p("h1"),e=x("Your apps"),r=i(),n=p("div"),o=p("img"),c=i(),b=p("span"),E=x(T),P=x("\n\t\t\t\t\t("),_=p("a"),q=x("log out"),G=x(")"),L=i(),R=p("ul");for(var a=0;a<C.length;a+=1)C[a].c();V=i(),O&&O.c(),Y=D(),this.h()},l:function(a){t=h(a,"HEADER",{class:!0},!1);var u=v(t);s=h(u,"H1",{class:!0},!1);var f=v(s);e=y(f,"Your apps"),f.forEach(d),r=l(u),n=h(u,"DIV",{class:!0},!1);var i=v(n);o=h(i,"IMG",{class:!0,alt:!0,src:!0},!1),v(o).forEach(d),c=l(i),b=h(i,"SPAN",{},!1);var p=v(b);E=y(p,T),P=y(p,"\n\t\t\t\t\t("),_=h(p,"A",{href:!0},!1);var m=v(_);q=y(m,"log out"),m.forEach(d),G=y(p,")"),p.forEach(d),i.forEach(d),u.forEach(d),L=l(a),R=h(a,"UL",{class:!0},!1);for(var g=v(R),x=0;x<C.length;x+=1)C[x].l(g);g.forEach(d),V=l(a),O&&O.l(a),Y=D(),this.h()},h:function(){m(s,"class","svelte-1a795bd"),m(o,"class","avatar svelte-1a795bd"),m(o,"alt",u=(a.user.name||a.user.username)+" avatar"),m(o,"src",f=a.user.avatar),m(_,"href","auth/logout"),m(n,"class","user svelte-1a795bd"),m(t,"class","svelte-1a795bd"),m(R,"class","svelte-1a795bd"),F=j(_,"click",A(a.logout))},m:function(a,u){g(a,t,u),I(t,s),I(s,e),I(t,r),I(t,n),I(n,o),I(n,c),I(n,b),I(b,E),I(b,P),I(b,_),I(_,q),I(b,G),g(a,L,u),g(a,R,u);for(var f=0;f<C.length;f+=1)C[f].m(R,null);g(a,V,u),O&&O.m(a,u),g(a,Y,u)},p:function(a,t){if(a.user&&u!==(u=(t.user.name||t.user.username)+" avatar")&&m(o,"alt",u),a.user&&f!==(f=t.user.avatar)&&m(o,"src",f),a.user&&T!==(T=t.user.name||t.user.username+"")&&k(E,T),a.apps||a.format){var s;for(U=t.apps,s=0;s<U.length;s+=1){var e=N(t,U,s);C[s]?C[s].p(a,e):(C[s]=w(e),C[s].c(),C[s].m(R,null))}for(;s<C.length;s+=1)C[s].d(1);C.length=U.length}null!==t.offset?O?O.p(a,t):((O=S(t)).c(),O.m(Y.parentNode,Y)):O&&(O.d(1),O=null)},d:function(a){a&&(d(t),d(L),d(R)),H(C,a),a&&d(V),O&&O.d(a),a&&d(Y),F()}}}function w(a){var t,s,e,r,n,o,u,f,c,b,E=a.app.name+"",j=a.format(a.app.updated_at)+"";return{c:function(){t=p("li"),s=p("a"),e=p("h2"),r=x(E),n=i(),o=p("span"),u=x("updated "),f=x(j),b=i(),this.h()},l:function(a){t=h(a,"LI",{class:!0},!1);var c=v(t);s=h(c,"A",{href:!0,class:!0},!1);var i=v(s);e=h(i,"H2",{class:!0},!1);var p=v(e);r=y(p,E),p.forEach(d),n=l(i),o=h(i,"SPAN",{class:!0},!1);var m=v(o);u=y(m,"updated "),f=y(m,j),m.forEach(d),i.forEach(d),b=l(c),c.forEach(d),this.h()},h:function(){m(e,"class","svelte-1a795bd"),m(o,"class","svelte-1a795bd"),m(s,"href",c="repl/"+a.app.uid),m(s,"class","svelte-1a795bd"),m(t,"class","svelte-1a795bd")},m:function(a,c){g(a,t,c),I(t,s),I(s,e),I(e,r),I(s,n),I(s,o),I(o,u),I(o,f),I(t,b)},p:function(a,t){a.apps&&E!==(E=t.app.name+"")&&k(r,E),a.apps&&j!==(j=t.format(t.app.updated_at)+"")&&k(f,j),a.apps&&c!==(c="repl/"+t.app.uid)&&m(s,"href",c)},d:function(a){a&&d(t)}}}function S(a){var t,s,e,r;return{c:function(){t=p("div"),s=p("a"),e=x("Next page..."),this.h()},l:function(a){t=h(a,"DIV",{},!1);var r=v(t);s=h(r,"A",{href:!0},!1);var n=v(s);e=y(n,"Next page..."),n.forEach(d),r.forEach(d),this.h()},h:function(){m(s,"href",r="apps?offset="+a.offset)},m:function(a,r){g(a,t,r),I(t,s),I(s,e)},p:function(a,t){a.offset&&r!==(r="apps?offset="+t.offset)&&m(s,"href",r)},d:function(a){a&&d(t)}}}function q(a){var t,s;function e(a,t){return t.user?_:P}var r=e(0,a),n=r(a);return{c:function(){t=i(),s=p("div"),n.c(),this.h()},l:function(a){t=l(a),s=h(a,"DIV",{class:!0},!1);var e=v(s);n.l(e),e.forEach(d),this.h()},h:function(){document.title="Your apps • Svelte",m(s,"class","apps svelte-1a795bd")},m:function(a,e){g(a,t,e),g(a,s,e),n.m(s,null)},p:function(a,t){r===(r=e(0,t))&&n?n.p(a,t):(n.d(1),(n=r(t))&&(n.c(),n.m(s,null)))},i:b,o:b,d:function(a){a&&(d(t),d(s)),n.d()}}}function G(a,t){return L.apply(this,arguments)}function L(){return(L=a(t.mark(function a(s,e){var r,n,o,u,f,c;return t.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.user,n=[],o=null,!r){a.next=21;break}return u="apps.json",s.query.offset&&(u+="?offset=".concat(encodeURIComponent(s.query.offset))),a.next=8,this.fetch(u,{credentials:"include"});case 8:if((f=a.sent).ok){a.next=16;break}return a.t0=this,a.t1=f.status,a.next=14,f.text();case 14:return a.t2=a.sent,a.abrupt("return",a.t0.error.call(a.t0,a.t1,a.t2));case 16:return a.next=18,f.json();case 18:c=a.sent,n=c.apps,o=c.offset;case 21:return a.abrupt("return",{user:r,apps:n,offset:o});case 22:case"end":return a.stop()}},a,this)}))).apply(this,arguments)}function R(a,t,s){var e=t.user,r=t.apps,n=t.offset,o=E("app"),u=o.login,f=o.logout,c=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a.$set=function(a){"user"in a&&s("user",e=a.user),"apps"in a&&s("apps",r=a.apps),"offset"in a&&s("offset",n=a.offset)},{user:e,apps:r,offset:n,login:u,logout:f,format:function(a){return c.format(new Date(a))}}}var V=function(a){function t(a){var s;return e(this,t),s=r(this,n(t).call(this)),o(f(s),a,R,q,u,["user","apps","offset"]),s}return s(t,c),t}();export default V;export{G as preload};
