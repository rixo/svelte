import{S as a,i as s,s as e,j as t,e as r,l as o,c as l,a as n,d as f,b as p,g as u,n as c,H as h,B as i,C as d,N as v,a4 as m,h as g,D as E,k as b,M as x}from"./index.4b91315e.js";function y(a,s,e){const t=Object.create(a);return t.app=s[e],t}function A(a){var s,e,t,o,h,E;return{c(){s=r("p"),e=i("Please "),t=r("a"),o=i("log in"),h=i(" to see your saved apps."),this.h()},l(a){s=l(a,"P",{},!1);var r=n(s);e=d(r,"Please "),t=l(r,"A",{href:!0},!1);var p=n(t);o=d(p,"log in"),p.forEach(f),h=d(r," to see your saved apps."),r.forEach(f),this.h()},h(){p(t,"href","auth/login"),E=v(t,"click",m(a.login))},m(a,r){u(a,s,r),g(s,e),g(s,t),g(t,o),g(s,h)},p:c,d(a){a&&f(s),E()}}}function D(a){var s,e,c,h,A,D,j,w,P,k,H,S,V,Y,q,C,L,M,R,U,$=a.user.name||a.user.username+"";let _=a.apps,B=[];for(let s=0;s<_.length;s+=1)B[s]=I(y(a,_,s));var F=null!==a.offset&&N(a);return{c(){s=r("header"),e=r("h1"),c=i("Your apps"),h=t(),A=r("div"),D=r("img"),P=t(),k=r("span"),H=i($),S=i("\n\t\t\t\t\t("),V=r("a"),Y=i("log out"),q=i(")"),C=t(),L=r("ul");for(let a=0;a<B.length;a+=1)B[a].c();M=t(),F&&F.c(),R=b(),this.h()},l(a){s=l(a,"HEADER",{class:!0},!1);var t=n(s);e=l(t,"H1",{class:!0},!1);var r=n(e);c=d(r,"Your apps"),r.forEach(f),h=o(t),A=l(t,"DIV",{class:!0},!1);var p=n(A);D=l(p,"IMG",{class:!0,alt:!0,src:!0},!1),n(D).forEach(f),P=o(p),k=l(p,"SPAN",{},!1);var u=n(k);H=d(u,$),S=d(u,"\n\t\t\t\t\t("),V=l(u,"A",{href:!0},!1);var i=n(V);Y=d(i,"log out"),i.forEach(f),q=d(u,")"),u.forEach(f),p.forEach(f),t.forEach(f),C=o(a),L=l(a,"UL",{class:!0},!1);var v=n(L);for(let a=0;a<B.length;a+=1)B[a].l(v);v.forEach(f),M=o(a),F&&F.l(a),R=b(),this.h()},h(){p(e,"class","svelte-1a795bd"),p(D,"class","avatar svelte-1a795bd"),p(D,"alt",j=(a.user.name||a.user.username)+" avatar"),p(D,"src",w=a.user.avatar),p(V,"href","auth/logout"),p(A,"class","user svelte-1a795bd"),p(s,"class","svelte-1a795bd"),p(L,"class","svelte-1a795bd"),U=v(V,"click",m(a.logout))},m(a,t){u(a,s,t),g(s,e),g(e,c),g(s,h),g(s,A),g(A,D),g(A,P),g(A,k),g(k,H),g(k,S),g(k,V),g(V,Y),g(k,q),u(a,C,t),u(a,L,t);for(let a=0;a<B.length;a+=1)B[a].m(L,null);u(a,M,t),F&&F.m(a,t),u(a,R,t)},p(a,s){if(a.user&&j!==(j=(s.user.name||s.user.username)+" avatar")&&p(D,"alt",j),a.user&&w!==(w=s.user.avatar)&&p(D,"src",w),a.user&&$!==($=s.user.name||s.user.username+"")&&E(H,$),a.apps||a.format){let e;for(_=s.apps,e=0;e<_.length;e+=1){const t=y(s,_,e);B[e]?B[e].p(a,t):(B[e]=I(t),B[e].c(),B[e].m(L,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=_.length}null!==s.offset?F?F.p(a,s):((F=N(s)).c(),F.m(R.parentNode,R)):F&&(F.d(1),F=null)},d(a){a&&(f(s),f(C),f(L)),x(B,a),a&&f(M),F&&F.d(a),a&&f(R),U()}}}function I(a){var s,e,c,h,v,m,b,x,y,A,D=a.app.name+"",I=a.format(a.app.updated_at)+"";return{c(){s=r("li"),e=r("a"),c=r("h2"),h=i(D),v=t(),m=r("span"),b=i("updated "),x=i(I),A=t(),this.h()},l(a){s=l(a,"LI",{class:!0},!1);var t=n(s);e=l(t,"A",{href:!0,class:!0},!1);var r=n(e);c=l(r,"H2",{class:!0},!1);var p=n(c);h=d(p,D),p.forEach(f),v=o(r),m=l(r,"SPAN",{class:!0},!1);var u=n(m);b=d(u,"updated "),x=d(u,I),u.forEach(f),r.forEach(f),A=o(t),t.forEach(f),this.h()},h(){p(c,"class","svelte-1a795bd"),p(m,"class","svelte-1a795bd"),p(e,"href",y="repl/"+a.app.uid),p(e,"class","svelte-1a795bd"),p(s,"class","svelte-1a795bd")},m(a,t){u(a,s,t),g(s,e),g(e,c),g(c,h),g(e,v),g(e,m),g(m,b),g(m,x),g(s,A)},p(a,s){a.apps&&D!==(D=s.app.name+"")&&E(h,D),a.apps&&I!==(I=s.format(s.app.updated_at)+"")&&E(x,I),a.apps&&y!==(y="repl/"+s.app.uid)&&p(e,"href",y)},d(a){a&&f(s)}}}function N(a){var s,e,t,o;return{c(){s=r("div"),e=r("a"),t=i("Next page..."),this.h()},l(a){s=l(a,"DIV",{},!1);var r=n(s);e=l(r,"A",{href:!0},!1);var o=n(e);t=d(o,"Next page..."),o.forEach(f),r.forEach(f),this.h()},h(){p(e,"href",o="apps?offset="+a.offset)},m(a,r){u(a,s,r),g(s,e),g(e,t)},p(a,s){a.offset&&o!==(o="apps?offset="+s.offset)&&p(e,"href",o)},d(a){a&&f(s)}}}function j(a){var s,e;function h(a,s){return s.user?D:A}var i=h(0,a),d=i(a);return{c(){s=t(),e=r("div"),d.c(),this.h()},l(a){s=o(a),e=l(a,"DIV",{class:!0},!1);var t=n(e);d.l(t),t.forEach(f),this.h()},h(){document.title="Your apps • Svelte",p(e,"class","apps svelte-1a795bd")},m(a,t){u(a,s,t),u(a,e,t),d.m(e,null)},p(a,s){i===(i=h(0,s))&&d?d.p(a,s):(d.d(1),(d=i(s))&&(d.c(),d.m(e,null)))},i:c,o:c,d(a){a&&(f(s),f(e)),d.d()}}}async function w(a,{user:s}){let e=[],t=null;if(s){let s="apps.json";a.query.offset&&(s+=`?offset=${encodeURIComponent(a.query.offset)}`);const r=await this.fetch(s,{credentials:"include"});if(!r.ok)return this.error(r.status,await r.text());({apps:e,offset:t}=await r.json())}return{user:s,apps:e,offset:t}}function P(a,s,e){let{user:t,apps:r,offset:o}=s;const{login:l,logout:n}=h("app"),f=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});return a.$set=a=>{"user"in a&&e("user",t=a.user),"apps"in a&&e("apps",r=a.apps),"offset"in a&&e("offset",o=a.offset)},{user:t,apps:r,offset:o,login:l,logout:n,format:a=>f.format(new Date(a))}}export default class extends a{constructor(a){super(),s(this,a,P,j,e,["user","apps","offset"])}}export{w as preload};
